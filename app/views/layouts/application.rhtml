<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title><%= SystemSettings.app_title + (@html_title ? ": #{@html_title}" : "") %></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="description" content="biorails" />
<meta name="keywords" content="study,project,experiment,request,wiki,issue,tracker" />
<!--[if IE]>
    <style type="text/css">
    body {behavior: url(<%= stylesheet_path "csshover.htc" %>);}
    </style>
<![endif]-->

<%= stylesheet_link_tag "layout" %>
<%= stylesheet_link_tag "icons" %>
<%= stylesheet_link_tag "forms" %>
<%= stylesheet_link_tag "table" %>
<%= stylesheet_link_tag "gnatt" %>
<%= stylesheet_link_tag "report" %>
<%= stylesheet_link_tag "sheet" %>
<%= stylesheet_link_tag "tabs" %>
<%= stylesheet_link_tag "menu" %>
<%= stylesheet_link_tag "print", :media => "print" %>
<%= stylesheet_link_tag 'jstoolbar' %>
<%= stylesheet_link_tag 'tree' %>
<%= stylesheet_link_tag 'calendar-green' %>
<%= stylesheet_link_tag 'datebocks_engine' %>

<%= javascript_include_tag :defaults %>
<%= javascript_include_tag 'menu' %>
<%= javascript_include_tag 'calendar' %>
<%= javascript_include_tag 'calendar-setup' %>
<%= javascript_include_tag 'datebocks_engine' %>
<%= javascript_include_tag 'sidemenu' %>
<%= javascript_include_tag 'tree' %>
<%= javascript_include_tiny_mce %>

<!-- page specific tags -->
<%= yield :includes %>

<%= yield :header_tags %>

<script type="text/javascript">
	// <![CDATA[
	var leftMenu;
	window.onload = function() {
		leftMenu = new SideMenu("left");
		leftMenu.speed=5;
		leftMenu.markCurrent= true;
		leftMenu.init();
	};
	// ]]>
</script>
</head>

<body>
<div id="container" >
  <div id="header">
    <div class='left'>
        <h1><%= SystemSettings.app_title %></h1>
        <h2><%= SystemSettings.app_subtitle %></h2>
    </div>
    <div class='right'>
        <% form_tag :action => 'finder' do %>
          Search:       <%= text_field :query, :text ,:size =>15 %>
          <%= observe_field( :query_text, :frequency => 1.0, 
               :update => "query_hitlist", :url => {:controller=> '/finder', :action => :query }) %>
        <% end %>
    </div>
  </div> 
  <%= render :partial =>'menu/top_menu_bar' %>      

<!--Main Contents -->  
  <div id="content">        

    <div id="left">
      <div class='sidemenu'>
       <%= if @content_for_sidemenu
            yield :sidemenu 
        else    
	       render :partial =>'menu/default_left_menu' 
        end %>
       </div>
       <div class="left_panel">
       <%= if @content_for_left 
            yield :left  
	    end %> 
	    </div>
    </div>

    <div id="main">

      <div id="flashes">
        <div id="flash-errors" style="display: none;"> <%= flash[:error] %> </div>
        <div id="flash-notice" style="display:none">  <%= flash[:notice] %> </div>
      </div>

      <%= yield %>

      <%= yield :form if @content_for_form %>

          
      <div id="centre">         
         <%= yield :centre %>
      </div>

      <div id="right">
        <%= yield :right %>
        <%= yield :action_nav %>        	 
        <%= yield :sidebar %>
      </div>
      
      <%= '</form>' if @content_for_form %>
    </div>


  <div>  
    <div id="footer">
        <%= yield :footer %>
    </div>
</div>
</body>
</html>