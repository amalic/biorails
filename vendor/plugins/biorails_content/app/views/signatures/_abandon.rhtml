<script>
    function validate(form){
        if (btnWhichButton.value=='Refuse' && document.getElementById("signatures_comments").value.length==0)
        {
            alert("You must enter a reason for refusing to sign the document in the comment box");
            return false;}
        else {
            return true;}
  
    }
</script>

<% dialog "Abandon Signature of folder by #{current_user.name}" do %>
  <%= render :partial=>'current_signatures'%>

  <div class='box'>
    <% form_for(:signature , :url=>signature_url(:action=>'update',:id=>@signature.id)) do |f| -%>
      <%= f.hidden_field :project_element_id %>
      <%= f.hidden_field :filename %>
      <%= f.hidden_field :signature_state %>
      <%= f.hidden_field :user_id %>
      <%= f.hidden_field :created_by_user_id %>
      <b><%= @signature.asserted_text %></b>
      <br />
      <div class="row">
        <div class="form-element">
          <label for="Password">
            Comfirm password for <%= current_user.login%>
          </label>
          <%= password_field_tag :password, nil%>  
        </div>
        <div class="form-element">
          <label for="comments">
            Comment
          </label>
          <%= f.text_area  'comments' , {:rows=>2, :class=>"text-input"} %>
        </div>
      </div>
  
  
      <div class="row">
        <%= submit_tag "Abandon" , :name=>'submit' , :onclick=>"btnWhichButton=this" %>
      </div>
    <% end %>
  </div>

  <embed src="<%= @signature.file_url %>" width="99%" height="440" type="application/pdf"></embed>

<% end %>
<br />
